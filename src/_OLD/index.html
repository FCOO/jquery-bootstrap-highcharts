<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="da" style="font-size: 100%">
<head>
	<title>fcoo.dk - jquery-bootstrap-highcharts - Demo</title>
	<meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta http-equiv='x-dns-prefetch-control' content='on'>

	<meta name='copyright' content='FCOO'>
	<meta name='owner' content='FCOO'>

    <link  href="bower_components.css" rel="stylesheet">

    <!-- <link  href="../bower_components/highcharts/css/highcharts.css" rel="stylesheet"> -->
    <!-- <link  href="../src/highcharts.css" rel="stylesheet"> -->
    <!-- <link  href="../src/themes/dark-unica.css" rel="stylesheet"> -->

    <link  href="../src/jquery-bootstrap-highcharts.css" rel="stylesheet">

    <style>
/*
        .highcharts-tooltip-box,
        .highcharts-tooltip-box .highcharts-label-box {
	        fill: black;
	        fill-opacity: 0.6;
	        stroke-width: 0;
            display: block;
        }

        .highcharts-tooltip text {
	        fill: white;
	        text-shadow: 0 0 3px black;

        }
        .highcharts-tooltip:first-child text {
	        fill: yellow;
            text-transform: capitalize;
        }
*/
    </style>
</head>

<body>
	<script src="bower_components.js"></script>
	<script src="../bower_components/highcharts/highcharts-more.js"></script>

    <script src="../src/jquery-bootstrap-highcharts.js"></script>

    <!-- <script src="../bower_components/highcharts/highstock.js"></script> -->
    <script src="../bower_components/highcharts/modules/map.js"></script>



    <script src="da.js"></script>


<button id="button_timeformat">24 <-> 12am/pm</button>
<button id="button_dateformat">DMY <-> YMD</button>
<button id="button_timezone_utc">TZ: UTC</button>
<button id="button_timezone_local">TZ: Local</button>
<button id="button_timezone_nuuk">TZ: Nuuk</button>
<button id="button_decimalpoint">1 000.123 <-> 1¤000#123</button>

<div id="container" style="height: 400px; min-width: 310px"></div>
<div id="container2" style="height: 300px; min-width: 310px"></div>
<div id="container3" style="min-width: 310px; height: 400px; margin: 0 auto"></div>
<div id="container4" style="min-width: 310px; height: 400px; margin: 0 auto"></div>
<div id="container5" style="min-width: 310px; height: 400px; margin: 0 auto"></div>
<div id="container6" style="min-width: 310px; height: 400px; margin: 0 auto"></div>
<div id="container7" style="min-width: 310px; height: 400px; margin: 0 auto"></div>
<div id="container8" style="min-width: 310px; max-width: 400px; height: 300px; margin: 0 auto"></div>
<div id="container9"></div>
<div id="container10"></div>
<script>

window.bsIsTouch = false;
window.bsIsTouch = (window.location.search =='?touch');

i18next.init();
i18next.changeLanguage('da');

var decimatPointIsHash = false;


//** DATE-FORMAT TEST ***
var formatIsDMY = true;
moment.sfSetFormat({ date: 'DMY' });

var formatIs24 = true;
moment.sfSetFormat({ time: 24 });

//** TIMEZONE TEST ***
moment.sfAddTimezone( {id:'America/Godthab'} );
moment.sfSetFormat({ timezone: 'utc' });


//**********************************************************************
var theChart,
    seriesOptions = [],
    names = ['MSFT', 'AAPL', 'GOOG'];

    Promise.defaultErrorHandler = function(reason, url){
        console.log(reason, url);
    };

function createChart() {

    seriesOptions.push(

    {
        type: 'flags',
        data: [{
            x: Date.UTC(2018, 1, 22),
            title: 'A',
            text: 'Shape: "squarepin"'
        }, {
            x: Date.UTC(2018, 3, 28),
            title: 'A',
            text: 'Shape: "squarepin"'
        }],
        onSeries: "theSerie0",
        shape: 'squarepin',
        width: 16
    },

    {
        type: 'flags',
        data: [{
            x: Date.UTC(2018, 2, 1),
            title: 'B',
            text: 'Shape: "circlepin"'
        }, {
            x: Date.UTC(2018, 3, 1),
            title: 'B',
            text: 'Shape: "circlepin"'
        }],
        shape: 'circlepin',
        width: 16
    },

    {
        type: 'flags',
        data: [{
            x: Date.UTC(2018, 2, 10),
            title: 'C',
            text: 'Shape: "flag"'
        }, {
            x: Date.UTC(2018, 3, 11),
            title: 'C',
            text: 'Shape: "flag"'
        }],
        color: Highcharts.getOptions().colors[0], // same as onSeries
        fillColor: Highcharts.getOptions().colors[0],
        onSeries: 'theSerie2',
        width: 16,
        style: { // text style
            color: 'white'
        },
        states: {
            hover: {
                fillColor: '#395C84' // darker
            }
        }
    }

    );

    theChart = Highcharts.stockChart('container', {
//    theChart = Highcharts.chart('container', {
        chart: {
            styledMode: true,
        },
        title: {text: 'Første title'},
        rangeSelector: {
            selected: 4
        },

        xAxis: {
            type: 'datetime'
        },

        yAxis: {
            labels: {
                formatter: function () {
                    return (this.value > 0 ? ' + ' : '') + this.value + '%';
                }
            },
            plotLines: [{
                value: 0,
                width: 2,
                color: 'silver'
            }]
        },

        plotOptions: {
            series: {
                compare: 'percent',
                showInNavigator: true
            }
        },

        tooltip: {
crosshairs: [true,false],

            //useHTML: true,
            pointFormat: '{series.name}: <b>{point.y}</b> ({point.change}%)',
            valueDecimals: 2,
            shared: false,
            split: true,
        },

        series: seriesOptions
    });
}

Promise.all([
    Promise.getJSON('data/msft-c.json'),
    Promise.getJSON('data/aapl-c.json'),
    Promise.getJSON('data/goog-c.json')
]).then(function(data){

    $.each(names, function(i, name){
        seriesOptions[i] = {
            id  : 'theSerie'+i,
            name: name,
            data: data[i]

        };
    });
    createChart();
});


//**********************************************************************
//var tzChart = Highcharts.stockChart('container2', {
var tzChart = Highcharts.chart('container2', {

    title: {
        text: 'UTC'
    },

    xAxis: {
        type: 'datetime',
        minorTickInterval: 'auto'

    },

    series: [
    {
        data: (function () {
            var arr = [],
                i;
            for (i = 0; i < 2*24; i = i + 1) {
                arr.push([Date.UTC(2016, 9, 29, i), i % 24]);
            }
            return arr;
        }()),
        dataLabels: {
            enabled: true,
            _format: 'y={y},x:%H={x:%H}',
            _format: 'x={x},x:%H={x:%H}',
            _format: '{x:%H}',
            format: '{y}',
        },
//HER        pointStart: Date.UTC(2016, 9, 29),
//HER        pointInterval: 1 * 60*60*1000,
        name: 'UTC Midnight',
        tooltip: {
            crosshairs: [true,true],
            pointFormat: 'point.y = {point.y}. point.x:%H:%M={point.x:%H:%M}',
            _pointFormat: '{point.x:%H:%M}',
        }
    }
    ]
});


//****************************************************************************************
$.getJSON(
    'https://cdn.jsdelivr.net/gh/highcharts/highcharts@v7.0.0/samples/data/usdeur.json',
    function (data) {
        var detailChart;

        // create the detail chart
        function createDetail(masterChart) {

            // prepare the detail chart
            var detailData = [],
                detailStart = data[0][0];

            $.each(masterChart.series[0].data, function () {
                if (this.x >= detailStart) {
                    detailData.push(this.y);
                }
            });

            // create a detail chart referenced by a global variable
            detailChart = Highcharts.chart('detail-container', {
                chart: {
                    marginBottom: 120,
                    reflow: false,
                    marginLeft: 50,
                    marginRight: 20,
                    style: {
                        position: 'absolute'
                    }
                },
                credits: {
                    enabled: false
                },
                title: {
                    text: 'Historical USD to EUR Exchange Rate',
                    align: 'left'
                },
                subtitle: {
                    text: 'Select an area by dragging across the lower chart',
                    align: 'left'
                },
                xAxis: {
                    type: 'datetime'
                },
                yAxis: {
                    title: {
                        text: null
                    },
                    maxZoom: 0.1
                },
                tooltip: {
                    formatter: function () {
                        var point = this.points[0];
                        return '<b>' + point.series.name + '</b><br/>' + Highcharts.dateFormat('%A %B %e %Y', this.x) + ':<br/>' +
                            '1 USD = ' + Highcharts.numberFormat(point.y, 2) + ' EUR';
                    },
                    shared: true
                },
                legend: {
                    enabled: false
                },
                plotOptions: {
                    series: {
                        marker: {
                            enabled: false,
                            states: {
                                hover: {
                                    enabled: true,
                                    radius: 3
                                }
                            }
                        }
                    }
                },
                series: [{
                    name: 'USD to EUR',
                    pointStart: detailStart,
                    pointInterval: 24 * 3600 * 1000,
                    data: detailData
                }],

                exporting: {
                    enabled: false
                }

            }); // return chart
        }

        // create the master chart
        function createMaster() {
            Highcharts.chart('master-container', {
                chart: {
                    reflow: false,
                    borderWidth: 0,
                    backgroundColor: null,
                    marginLeft: 50,
                    marginRight: 20,
                    zoomType: 'x',
                    events: {

                        // listen to the selection event on the master chart to update the
                        // extremes of the detail chart
                        selection: function (event) {
                            var extremesObject = event.xAxis[0],
                                min = extremesObject.min,
                                max = extremesObject.max,
                                detailData = [],
                                xAxis = this.xAxis[0];

                            // reverse engineer the last part of the data
                            $.each(this.series[0].data, function () {
                                if (this.x > min && this.x < max) {
                                    detailData.push([this.x, this.y]);
                                }
                            });

                            // move the plot bands to reflect the new detail span
                            xAxis.removePlotBand('mask-before');
                            xAxis.addPlotBand({
                                id: 'mask-before',
                                from: data[0][0],
                                to: min,
                                color: 'rgba(0, 0, 0, 0.2)'
                            });

                            xAxis.removePlotBand('mask-after');
                            xAxis.addPlotBand({
                                id: 'mask-after',
                                from: max,
                                to: data[data.length - 1][0],
                                color: 'rgba(0, 0, 0, 0.2)'
                            });


                            detailChart.series[0].setData(detailData);

                            return false;
                        }
                    }
                },
                title: {
                    text: null
                },
                xAxis: {
                    type: 'datetime',
                    showLastTickLabel: true,
                    maxZoom: 14 * 24 * 3600000, // fourteen days
                    plotBands: [{
                        id: 'mask-before',
                        from: data[0][0],
                        to: data[data.length - 1][0],
                        color: 'rgba(0, 0, 0, 0.2)'
                    }],
                    title: {
                        text: null
                    }
                },
                yAxis: {
                    gridLineWidth: 0,
                    labels: {
                        enabled: false
                    },
                    title: {
                        text: null
                    },
                    min: 0.6,
                    showFirstLabel: false
                },
                tooltip: {
                    formatter: function () {
                        return false;
                    }
                },
                legend: {
                    enabled: false
                },
                credits: {
                    enabled: false
                },
                plotOptions: {
                    series: {
                        fillColor: {
                            linearGradient: [0, 0, 0, 70],
                            stops: [
                                [0, Highcharts.getOptions().colors[0]],
                                [1, 'rgba(255,255,255,0)']
                            ]
                        },
                        lineWidth: 1,
                        marker: {
                            enabled: false
                        },
                        shadow: false,
                        states: {
                            hover: {
                                lineWidth: 1
                            }
                        },
                        enableMouseTracking: false
                    }
                },

                series: [{
                    type: 'area',
                    name: 'USD to EUR',
                    pointInterval: 24 * 3600 * 1000,
                    pointStart: data[0][0],
                    data: data
                }],

                exporting: {
                    enabled: false
                }

            }, function (masterChart) {
                createDetail(masterChart);
            }); // return chart instance
        }

        // make the container smaller and add a second container for the master chart
        var $container = $('#container3')
            .css('position', 'relative');

        $('<div id="detail-container">')
            .appendTo($container);

        $('<div id="master-container">')
            .css({
                position: 'absolute',
                top: 300,
                height: 100,
                width: '100%'
            })
            .appendTo($container);

        // create master and in its callback, create the detail chart
        createMaster();
    }
);
//****************************************************************************************
Highcharts.chart('container4', {

    title: {
        text: 'Solar Employment Growth by Sector, 2010-2016'
    },

    subtitle: {
        text: 'Source: thesolarfoundation.com'
    },

    yAxis: {
        title: {
            text: 'Number of Employees'
        }
    },
    legend: {
        layout: 'vertical',
        align: 'right',
        verticalAlign: 'middle'
    },

    plotOptions: {
        series: {
            label: {
                connectorAllowed: false
            },
            pointStart: 2010
        }
    },

    series: [{
        name: 'Installation',
        data: [43934, 52503, 57177, 69658, 97031, 119931, 137133, 154175]
    }, {
        name: 'Manufacturing',
        data: [24916, 24064, 29742, 29851, 32490, 30282, 38121, 40434]
    }, {
        name: 'Sales & Distribution',
        data: [11744, 17722, 16005, 19771, 20185, 24377, 32147, 39387]
    }, {
        name: 'Project Development',
        data: [null, null, 7988, 12169, 15112, 22452, 34400, 34227]
    }, {
        name: 'Other',
        data: [12908, 5948, 8105, 11248, 8989, 11816, 18274, 18111]
    }],

    responsive: {
        rules: [{
            condition: {
                maxWidth: 500
            },
            chartOptions: {
                legend: {
                    layout: 'horizontal',
                    align: 'center',
                    verticalAlign: 'bottom'
                }
            }
        }]
    }

})
//****************************************************************************************
Highcharts.chart('container5', {
    chart: {
        zoomType: 'xy'
    },
    title: {
        text: 'Temperature vs Rainfall'
    },
    xAxis: [{
        categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
    }],
    yAxis: [{ // Primary yAxis
        labels: {
            format: '{value} °C',
            style: {
                color: Highcharts.getOptions().colors[1]
            }
        },
        title: {
            text: 'Temperature',
            style: {
                color: Highcharts.getOptions().colors[1]
            }
        }
    }, { // Secondary yAxis
        title: {
            text: 'Rainfall',
            style: {
                color: Highcharts.getOptions().colors[0]
            }
        },
        labels: {
            format: '{value} mm',
            style: {
                color: Highcharts.getOptions().colors[0]
            }
        },
        opposite: true
    }],

    tooltip: {
        shared: true
    },

    series: [{
        name: 'Rainfall',
        type: 'column',
        yAxis: 1,
        data: [49.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4],
        tooltip: {
            pointFormat: '<span style="font-weight: bold; color: {series.color}">{series.name}</span>: <b>{point.y:.1f} mm</b> '
        }
    }, {
        name: 'Rainfall error',
        type: 'errorbar',
        yAxis: 1,
        data: [[48, 51], [68, 73], [92, 110], [128, 136], [140, 150], [171, 179], [135, 143], [142, 149], [204, 220], [189, 199], [95, 110], [52, 56]],
        tooltip: {
            pointFormat: '(error range: {point.low}-{point.high} mm)<br/>'
        }
    }, {
        name: 'Temperature',
        type: 'spline',
        data: [7.0, 6.9, 9.5, 14.5, 18.2, 21.5, 25.2, 26.5, 23.3, 18.3, 13.9, 9.6],
        tooltip: {
            pointFormat: '<span style="font-weight: bold; color: {series.color}">{series.name}</span>: <b>{point.y:.1f}°C</b> '
        }
    }, {
        name: 'Temperature error',
        type: 'errorbar',
        data: [[6, 8], [5.9, 7.6], [9.4, 10.4], [14.1, 15.9], [18.0, 20.1], [21.0, 24.0], [23.2, 25.3], [26.1, 27.8], [23.2, 23.9], [18.0, 21.1], [12.9, 14.0], [7.6, 10.0]],
        tooltip: {
            pointFormat: '(error range: {point.low}-{point.high}°C)<br/>'
        }
    }]
});
//****************************************************************************************
$.getJSON('data/aapl-ohlc.json', function (data) {

    // create the chart
    Highcharts.stockChart('container6', {


        rangeSelector: {
            selected: 1
        },

        title: {
            text: 'AAPL Stock Price'
        },

        series: [{
            type: 'candlestick',
            name: 'AAPL Stock Price',
            data: data,
            dataGrouping: {
                units: [
                    [
                        'week', // unit name
                        [1] // allowed multiples
                    ], [
                        'month',
                        [1, 2, 3, 4, 6]
                    ]
                ]
            }
        }]
    });
});
//****************************************************************************************
Highcharts.chart('container7', {
    chart: {
        type: 'waterfall'
    },

    title: {
        text: 'Highcharts Waterfall'
    },

    xAxis: {
        type: 'category'
    },

    yAxis: {
        title: {
            text: 'USD'
        }
    },

    legend: {
        enabled: false
    },

    tooltip: {
        pointFormat: '<b>${point.y:,.2f}</b> USD'
    },

    series: [{
        upColor: Highcharts.getOptions().colors[2],
        color: Highcharts.getOptions().colors[3],
        data: [{
            name: 'Start',
            y: 120000
        }, {
            name: 'Product Revenue',
            y: 569000
        }, {
            name: 'Service Revenue',
            y: 231000
        }, {
            name: 'Positive Balance',
            isIntermediateSum: true,
            color: Highcharts.getOptions().colors[1]
        }, {
            name: 'Fixed Costs',
            y: -342000
        }, {
            name: 'Variable Costs',
            y: -233000
        }, {
            name: 'Balance',
            isSum: true,
            color: Highcharts.getOptions().colors[1]
        }],
        dataLabels: {
            enabled: true,
            formatter: function () {
                return Highcharts.numberFormat(this.y / 1000, 0, ',') + 'k';
            },
            style: {
                fontWeight: 'bold'
            }
        },
        pointPadding: 0
    }]
});

//****************************************************************************************
Highcharts.chart('container8', {

    chart: {
        type: 'gauge',
        plotBackgroundColor: null,
        plotBackgroundImage: null,
        plotBorderWidth: 0,
        plotShadow: false
    },

    title: {
        text: 'Speedometer'
    },

    pane: {
        startAngle: -150,
        endAngle: 150,
        background: [{
            backgroundColor: {
                linearGradient: { x1: 0, y1: 0, x2: 0, y2: 1 },
                stops: [
                    [0, '#FFF'],
                    [1, '#333']
                ]
            },
            borderWidth: 0,
            outerRadius: '109%'
        }, {
            backgroundColor: {
                linearGradient: { x1: 0, y1: 0, x2: 0, y2: 1 },
                stops: [
                    [0, '#333'],
                    [1, '#FFF']
                ]
            },
            borderWidth: 1,
            outerRadius: '107%'
        }, {
            // default background
        }, {
            backgroundColor: '#DDD',
            borderWidth: 0,
            outerRadius: '105%',
            innerRadius: '103%'
        }]
    },

    // the value axis
    yAxis: {
        min: 0,
        max: 200,

        minorTickInterval: 'auto',
        minorTickWidth: 1,
        minorTickLength: 10,
        minorTickPosition: 'inside',
        minorTickColor: '#666',

        tickPixelInterval: 30,
        tickWidth: 2,
        tickPosition: 'inside',
        tickLength: 10,
        tickColor: '#666',
        labels: {
            step: 2,
            rotation: 'auto'
        },
        title: {
            text: 'km/h'
        },
        plotBands: [{
            from: 0,
            to: 120,
            color: '#55BF3B' // green
        }, {
            from: 120,
            to: 160,
            color: '#DDDF0D' // yellow
        }, {
            from: 160,
            to: 200,
            color: '#DF5353' // red
        }]
    },

    series: [{
        name: 'Speed',
        data: [80],
        tooltip: {
            valueSuffix: ' km/h'
        }
    }]

});

//****************************************************************************************
// Prepare random data
var data = [
    ['DE.SH', 728],
    ['DE.BE', 710],
    ['DE.MV', 963],
    ['DE.HB', 541],
    ['DE.HH', 622],
    ['DE.RP', 866],
    ['DE.SL', 398],
    ['DE.BY', 785],
    ['DE.SN', 223],
    ['DE.ST', 605],
    ['DE.NW', 237],
    ['DE.BW', 157],
    ['DE.HE', 134],
    ['DE.NI', 136],
    ['DE.TH', 704],
    ['DE.', 361]
];

$.getJSON('https://cdn.jsdelivr.net/gh/highcharts/highcharts@v7.0.0/samples/data/germany.geo.json', function (geojson) {

    // Initiate the chart
    Highcharts.mapChart('container9', {
        chart: {
            map: geojson
        },

        title: {
            text: 'GeoJSON in Highmaps'
        },

        mapNavigation: {
            enabled: true,
            buttonOptions: {
                verticalAlign: 'bottom'
            }
        },

        colorAxis: {
            tickPixelInterval: 100
        },

        series: [{
            data: data,
            keys: ['code_hasc', 'value'],
            joinBy: 'code_hasc',
            name: 'Random data',
            states: {
                hover: {
                    color: '#a4edba'
                }
            },
            dataLabels: {
                enabled: true,
                format: '{point.properties.postal}'
            }
        }]
    });
});
//****************************************************************************************
//container10
//****************************************************************************************




$('#button_timeformat').on('click', function(){
    formatIs24 = !formatIs24;
    moment.sfSetFormat({ time: formatIs24 ? 24 : 12});
});

$('#button_dateformat').on('click', function(){
    formatIsDMY = !formatIsDMY;
    moment.sfSetFormat({ date: formatIsDMY ? 'DMY' : 'YMD' });
});

$('#button_timezone_utc').on('click', function(){
    moment.sfSetFormat({ timezone: 'utc'});
    tzChart.title.update({ text: 'UTC'});
});

$('#button_timezone_local').on('click', function(){
    moment.sfSetFormat({ timezone: 'local'});
    tzChart.title.update({ text: 'Local'});
});
$('#button_timezone_nuuk').on('click', function(){
    moment.sfSetFormat({ timezone: 'America/Godthab'});
    tzChart.title.update({ text: 'Nuuk'});
});


$('#button_decimalpoint').on('click', function(){
    decimatPointIsHash = !decimatPointIsHash;
    Highcharts.setOptions({
        lang: {
            decimalPoint: decimatPointIsHash ? '#' : '.',
            thousandsSep: decimatPointIsHash ? '¤' : '\u0020'
        }
    }, true);
});



</script>


</body>
</html>
